<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.trianglex.usercentral.dao.UserDAO">

    <insert id="addUser" keyProperty="id" keyColumn="id">
        insert into t_user (user_id, username, password, salt, nickname, gender, email)
        values (#{userId}, #{username}, #{password}, #{salt}, #{nickname}, #{gender}, #{email})
    </insert>

    <select id="getUserByUsernameAndPassword" resultType="org.trianglex.usercentral.domain.User">
        select ${fields}
        from t_user
        where
            username = #{username}
            and password = #{password}
            and status = 1
        limit 1
    </select>

    <select id="getUserById" resultType="org.trianglex.usercentral.domain.User">
        select ${fields}
        from t_user
        where
            user_id = #{userId}
        limit 1
    </select>

    <select id="getUserByUsername" resultType="org.trianglex.usercentral.domain.User">
        select ${fields}
        from t_user
        where
            username = #{username}
            and status = 1
        limit 1
    </select>

    <select id="isUserExists" resultType="int">
        select count(1)
        from t_user
        where
            ${where}
        limit 1
    </select>

</mapper>